<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MENTOR - Educational App</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js"></script>

    <style>
        body { font-family: 'Poppins', sans-serif; background-color: #f0f2f5; overflow-x: hidden; }
        .app-container { max-width: 480px; margin: 0 auto; background: white; min-height: 100vh; position: relative; box-shadow: 0 0 20px rgba(0,0,0,0.1); overflow: hidden; }
        
        /* Theme Colors */
        :root { --primary: #6C63FF; --secondary: #2A2A2A; --accent: #FF6584; }
        .text-primary { color: var(--primary); }
        .bg-primary { background-color: var(--primary); }
        .border-primary { border-color: var(--primary); }

        /* Splash Screen Animation */
        #splash-screen { position: fixed; inset: 0; z-index: 50; background: white; display: flex; flex-direction: column; align-items: center; justify-content: center; }
        .bird-icon { font-size: 3rem; color: var(--primary); opacity: 0; transform: translateX(-100px) translateY(-50px); }
        .app-title span { opacity: 0; display: inline-block; font-size: 2rem; font-weight: bold; color: var(--secondary); }

        /* Auth Animations */
        .auth-container { transition: transform 0.5s cubic-bezier(0.68, -0.55, 0.27, 1.55); }
        .slide-out-left { transform: translateX(-100%); opacity: 0; }
        .slide-in-right { transform: translateX(0); opacity: 1; }
        
        /* Bottom Nav */
        .bottom-nav { position: fixed; bottom: 0; width: 100%; max-width: 480px; background: white; box-shadow: 0 -2px 10px rgba(0,0,0,0.05); display: flex; justify-content: space-around; align-items: flex-end; padding-bottom: 10px; z-index: 40; height: 70px; }
        .nav-btn { display: flex; flex-direction: column; align-items: center; color: #9CA3AF; transition: 0.3s; width: 20%; font-size: 0.8rem; }
        .nav-btn.active { color: var(--primary); transform: translateY(-5px); }
        .nav-btn-circle { width: 60px; height: 60px; background: var(--primary); border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; margin-bottom: 25px; box-shadow: 0 4px 15px rgba(108, 99, 255, 0.4); border: 4px solid white; transition: 0.3s; }
        .nav-btn-circle:active { transform: scale(0.95); }

        /* Components */
        .card-shadow { box-shadow: 0 4px 15px rgba(0,0,0,0.05); }
        .progress-circle { width: 50px; height: 50px; border-radius: 50%; background: conic-gradient(var(--primary) calc(var(--percent) * 1%), #e5e7eb 0); display: flex; align-items: center; justify-content: center; }
        .progress-inner { width: 40px; height: 40px; background: white; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 0.7rem; font-weight: bold; }
        
        /* Hide Scrollbar */
        ::-webkit-scrollbar { width: 0px; background: transparent; }

        /* Transitions */
        .page-view { display: none; animation: fadeIn 0.4s ease-in-out; padding-bottom: 90px; }
        .page-view.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body>

<div class="app-container">
    
    <div id="splash-screen">
        <i class="fa-solid fa-dove bird-icon" id="bird"></i>
        <h1 class="app-title mt-4">
            <span class="letter">M</span><span class="letter">E</span><span class="letter">N</span><span class="letter">T</span><span class="letter">O</span><span class="letter">R</span>
        </h1>
    </div>

    <div id="auth-screen" class="page-view h-screen flex flex-col justify-center px-8" style="padding-bottom: 0;">
        <div class="text-center mb-8">
            <i class="fa-solid fa-dove text-4xl text-primary mb-2"></i>
            <h2 class="text-2xl font-bold text-gray-800">Welcome Back</h2>
            <p class="text-gray-500 text-sm">Please login to continue</p>
        </div>

        <div id="login-form" class="auth-container">
            <div class="space-y-4">
                <input type="email" id="login-email" placeholder="Email Address" class="w-full p-4 bg-gray-50 rounded-xl border-none focus:ring-2 focus:ring-primary outline-none transition">
                <input type="password" id="login-pass" placeholder="Password" class="w-full p-4 bg-gray-50 rounded-xl border-none focus:ring-2 focus:ring-primary outline-none transition">
                <button onclick="handleLogin()" class="w-full bg-primary text-white p-4 rounded-xl font-semibold shadow-lg shadow-indigo-200 active:scale-95 transition">LOGIN</button>
            </div>
            <p class="text-center mt-6 text-gray-500">Don't have an account? <span onclick="toggleAuth('register')" class="text-primary font-bold cursor-pointer">Register</span></p>
        </div>

        <div id="register-form" class="auth-container hidden">
            <div class="space-y-4">
                <input type="text" id="reg-name" placeholder="Full Name" class="w-full p-4 bg-gray-50 rounded-xl border-none focus:ring-2 focus:ring-primary outline-none transition">
                <input type="email" id="reg-email" placeholder="Email Address" class="w-full p-4 bg-gray-50 rounded-xl border-none focus:ring-2 focus:ring-primary outline-none transition">
                <input type="password" id="reg-pass" placeholder="Password" class="w-full p-4 bg-gray-50 rounded-xl border-none focus:ring-2 focus:ring-primary outline-none transition">
                <button onclick="handleRegister()" class="w-full bg-primary text-white p-4 rounded-xl font-semibold shadow-lg shadow-indigo-200 active:scale-95 transition">REGISTER</button>
            </div>
            <p class="text-center mt-6 text-gray-500">Already have an account? <span onclick="toggleAuth('login')" class="text-primary font-bold cursor-pointer">Login</span></p>
        </div>
    </div>

    <div id="main-app" class="hidden">
        
        <div class="p-4 flex justify-between items-center bg-white sticky top-0 z-30">
            <div class="flex items-center gap-2">
                <i class="fa-solid fa-dove text-primary text-xl"></i>
                <h2 class="font-bold text-lg text-gray-800">MENTOR</h2>
            </div>
            <div class="flex gap-4">
                <i class="fa-regular fa-bell text-gray-600 cursor-pointer"></i>
                <i class="fa-solid fa-bars text-gray-600 cursor-pointer"></i>
            </div>
        </div>

        <div id="home-view" class="page-view active px-4">
            <div class="bg-gradient-to-r from-indigo-500 to-purple-600 rounded-2xl p-6 text-white mb-6 relative overflow-hidden shadow-lg">
                <div class="absolute right-[-20px] top-[-20px] bg-white opacity-10 w-32 h-32 rounded-full"></div>
                <h3 class="text-xl font-bold mb-1">Welcome, <span id="user-name-display">Student</span>!</h3>
                <p class="text-indigo-100 text-sm opacity-90">Ready to achieve your goals today?</p>
            </div>

            <div class="mb-6 overflow-x-auto whitespace-nowrap pb-2 scroll-smooth">
                <div class="inline-block w-full h-32 bg-gray-200 rounded-xl mr-2 relative overflow-hidden cursor-pointer">
                    <img src="https://images.unsplash.com/photo-1434030216411-0b793f4b4173?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80" class="w-full h-full object-cover">
                    <div class="absolute bottom-0 w-full bg-gradient-to-t from-black to-transparent p-3">
                        <p class="text-white text-sm font-bold">New Exam Routine Published!</p>
                    </div>
                </div>
            </div>

            <div class="grid grid-cols-3 gap-4 mb-8">
                <div onclick="openModal('Routine')" class="bg-white p-4 rounded-xl card-shadow flex flex-col items-center justify-center gap-2 cursor-pointer active:scale-95 transition">
                    <div class="w-12 h-12 rounded-full bg-blue-50 flex items-center justify-center text-blue-500"><i class="fa-solid fa-calendar-check text-xl"></i></div>
                    <span class="text-xs font-semibold text-gray-600">Routine</span>
                </div>
                <div onclick="switchTab('study')" class="bg-white p-4 rounded-xl card-shadow flex flex-col items-center justify-center gap-2 cursor-pointer active:scale-95 transition">
                    <div class="w-12 h-12 rounded-full bg-purple-50 flex items-center justify-center text-purple-500"><i class="fa-solid fa-book-open text-xl"></i></div>
                    <span class="text-xs font-semibold text-gray-600">Study</span>
                </div>
                <div onclick="switchTab('rank')" class="bg-white p-4 rounded-xl card-shadow flex flex-col items-center justify-center gap-2 cursor-pointer active:scale-95 transition">
                    <div class="w-12 h-12 rounded-full bg-orange-50 flex items-center justify-center text-orange-500"><i class="fa-solid fa-trophy text-xl"></i></div>
                    <span class="text-xs font-semibold text-gray-600">Rank</span>
                </div>
            </div>

            <div class="bg-yellow-50 border-l-4 border-yellow-400 p-3 mb-6 rounded-r-lg">
                <marquee class="text-sm text-yellow-800 font-medium">ðŸ“¢ Notice: Upcoming BCS Model Test on Friday! Stay prepared.</marquee>
            </div>

            <div class="flex justify-between items-center mb-4">
                <h3 class="font-bold text-gray-800">Daily Memorizing</h3>
                <span class="text-primary text-xs font-bold">Day 01</span>
            </div>
            <div class="space-y-3 mb-8" id="memorizing-list">
                </div>

            <h3 class="font-bold text-gray-800 mb-4">Support & Help</h3>
            <div class="bg-white p-4 rounded-xl card-shadow flex items-center gap-4 mb-4">
                <div class="w-10 h-10 rounded-full bg-green-100 text-green-600 flex items-center justify-center"><i class="fa-brands fa-whatsapp text-lg"></i></div>
                <div>
                    <h4 class="font-bold text-sm">Chat Support</h4>
                    <p class="text-xs text-gray-400">24/7 Available for students</p>
                </div>
            </div>
        </div>

        <div id="study-view" class="page-view px-4">
            <h2 class="text-2xl font-bold mb-4">Study Mode</h2>
            
            <div class="bg-white rounded-2xl p-6 card-shadow text-center mb-6">
                <p class="text-gray-400 text-sm mb-2">Today's Target</p>
                <div class="text-4xl font-bold text-gray-800 mb-2 font-mono">04:30:00</div>
                <div class="w-full bg-gray-100 rounded-full h-2.5 mb-2">
                    <div class="bg-primary h-2.5 rounded-full" style="width: 45%"></div>
                </div>
                <div class="flex justify-between text-xs text-gray-500">
                    <span>Completed: 45%</span>
                    <span>Goal: 8 Hours</span>
                </div>
            </div>

            <div class="mb-6">
                <label class="text-xs font-bold text-gray-500 ml-1">SELECT LEVEL</label>
                <select class="w-full mt-1 p-3 bg-white rounded-xl border-none card-shadow outline-none text-gray-700">
                    <option>Beginner (BCS Prelims)</option>
                    <option>Intermediate</option>
                    <option>Advanced</option>
                </select>
            </div>

            <div class="bg-white rounded-2xl p-5 card-shadow border-l-4 border-primary">
                <h4 class="font-bold text-lg mb-2">Day 01: Bangla Literature</h4>
                <ul class="text-sm text-gray-600 space-y-2 mb-4 list-disc pl-4">
                    <li>Charyapada basics</li>
                    <li>Srikrishnakirtan Kabya</li>
                    <li>Life of Rabindranath Tagore</li>
                </ul>
                <button onclick="alert('Starting MCQ Practice...')" class="w-full py-3 rounded-lg bg-gray-800 text-white font-medium hover:bg-gray-700 transition">Start Practice</button>
            </div>
        </div>

        <div id="book-view" class="page-view px-4">
            <div class="bg-gray-100 p-3 rounded-xl flex items-center gap-3 mb-6">
                <i class="fa-solid fa-search text-gray-400"></i>
                <input type="text" placeholder="Search books..." class="bg-transparent outline-none w-full text-sm">
            </div>
            <div class="grid grid-cols-2 gap-4">
                <div class="bg-white p-3 rounded-xl card-shadow">
                    <div class="h-32 bg-gray-200 rounded-lg mb-3 overflow-hidden">
                         <img src="https://images.unsplash.com/photo-1544947950-fa07a98d237f?auto=format&fit=crop&q=80&w=200" class="w-full h-full object-cover">
                    </div>
                    <h4 class="font-bold text-sm truncate">BCS Analysis</h4>
                    <p class="text-xs text-gray-500">By George</p>
                </div>
                <div class="bg-white p-3 rounded-xl card-shadow">
                    <div class="h-32 bg-gray-200 rounded-lg mb-3 overflow-hidden">
                        <img src="https://images.unsplash.com/photo-1512820790803-83ca734da794?auto=format&fit=crop&q=80&w=200" class="w-full h-full object-cover">
                    </div>
                    <h4 class="font-bold text-sm truncate">English Grammar</h4>
                    <p class="text-xs text-gray-500">Competitive Exam</p>
                </div>
            </div>
        </div>

        <div id="exam-view" class="page-view px-4">
            <div class="flex p-1 bg-gray-200 rounded-xl mb-6">
                <button class="flex-1 py-2 text-xs font-bold rounded-lg bg-white shadow-sm text-gray-800">Live Exam</button>
                <button class="flex-1 py-2 text-xs font-bold rounded-lg text-gray-500">Model Test</button>
                <button class="flex-1 py-2 text-xs font-bold rounded-lg text-gray-500">Subject</button>
            </div>

            <div class="bg-white rounded-2xl p-5 card-shadow mb-4 relative overflow-hidden">
                <div class="absolute top-0 right-0 bg-red-500 text-white text-[10px] px-2 py-1 rounded-bl-lg font-bold animate-pulse">LIVE</div>
                <h3 class="font-bold text-gray-800 mb-1">45th BCS Preliminary</h3>
                <p class="text-xs text-gray-500 mb-4">Total Questions: 200 | Time: 2 Hours</p>
                <div class="flex items-center justify-between">
                    <span class="text-xs font-bold text-primary">Ends in 4h 30m</span>
                    <button onclick="startExam()" class="px-6 py-2 bg-primary text-white text-sm rounded-lg font-medium shadow-lg shadow-indigo-200">Start</button>
                </div>
            </div>
        </div>

        <div id="profile-view" class="page-view px-4">
            <div class="flex flex-col items-center mb-8">
                <div class="w-24 h-24 rounded-full bg-gray-200 mb-4 overflow-hidden border-4 border-white shadow-lg">
                    <img src="https://via.placeholder.com/150" class="w-full h-full object-cover">
                </div>
                <h2 class="text-xl font-bold text-gray-800" id="profile-name">Md Walid</h2>
                <p class="text-sm text-gray-500">Student | Chittagong University</p>
            </div>

            <div class="bg-white rounded-2xl p-4 card-shadow mb-4">
                <div class="flex items-center justify-between p-3 border-b border-gray-100">
                    <div class="flex items-center gap-3">
                        <i class="fa-solid fa-user-pen text-gray-400"></i>
                        <span class="text-sm font-medium">Edit Profile</span>
                    </div>
                    <i class="fa-solid fa-chevron-right text-xs text-gray-300"></i>
                </div>
                <div class="flex items-center justify-between p-3 border-b border-gray-100">
                    <div class="flex items-center gap-3">
                        <i class="fa-solid fa-gear text-gray-400"></i>
                        <span class="text-sm font-medium">Settings</span>
                    </div>
                    <i class="fa-solid fa-chevron-right text-xs text-gray-300"></i>
                </div>
                <div onclick="logout()" class="flex items-center justify-between p-3 cursor-pointer">
                    <div class="flex items-center gap-3">
                        <i class="fa-solid fa-right-from-bracket text-red-400"></i>
                        <span class="text-sm font-medium text-red-500">Logout</span>
                    </div>
                </div>
            </div>
        </div>

         <div id="rank-view" class="page-view px-4">
            <h2 class="text-2xl font-bold mb-4">Leaderboard</h2>
            <div class="bg-yellow-100 p-4 rounded-xl flex items-center justify-between mb-6 border border-yellow-200">
                <div class="flex items-center gap-3">
                    <div class="font-bold text-xl text-yellow-700">#42</div>
                    <div>
                        <div class="font-bold text-sm">Your Rank</div>
                        <div class="text-xs text-gray-500">1250 Points</div>
                    </div>
                </div>
                <i class="fa-solid fa-medal text-yellow-500 text-2xl"></i>
            </div>
            <div class="space-y-3">
                <div class="bg-white p-3 rounded-xl card-shadow flex items-center justify-between">
                    <div class="flex items-center gap-3">
                        <span class="font-bold text-gray-400 w-6">01</span>
                        <div class="w-8 h-8 rounded-full bg-gray-200"></div>
                        <span class="font-bold text-sm">Top Student</span>
                    </div>
                    <span class="text-xs font-bold text-primary">2100 pts</span>
                </div>
            </div>
         </div>

    </div>

    <div id="bottom-bar" class="bottom-nav hidden">
        <div onclick="switchTab('home')" class="nav-btn active" id="btn-home">
            <i class="fa-solid fa-house mb-1 text-lg"></i> Home
        </div>
        <div onclick="switchTab('book')" class="nav-btn" id="btn-book">
            <i class="fa-solid fa-book mb-1 text-lg"></i> Book
        </div>
        <div class="nav-btn relative">
            <div onclick="switchTab('exam')" class="nav-btn-circle cursor-pointer">
                <i class="fa-solid fa-pen-nib text-2xl"></i>
            </div>
        </div>
        <div onclick="switchTab('review')" class="nav-btn" id="btn-review">
            <i class="fa-solid fa-clipboard-list mb-1 text-lg"></i> Review
        </div>
        <div onclick="switchTab('profile')" class="nav-btn" id="btn-profile">
            <i class="fa-solid fa-user mb-1 text-lg"></i> Profile
        </div>
    </div>

</div>

<script type="module">
    // Import Firebase
    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-app.js";
    import { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-auth.js";
    import { getFirestore, doc, getDoc, collection, getDocs } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore.js";

    // Firebase Config
    const firebaseConfig = {
        apiKey: "AIzaSyCRWpnJC1Z3WCNUAyfjhw8KlKyJ03z3G2w",
        authDomain: "mentor-ac742.firebaseapp.com",
        projectId: "mentor-ac742",
        storageBucket: "mentor-ac742.firebasestorage.app",
        messagingSenderId: "271805714479",
        appId: "1:271805714479:web:efc071e2021db4286db6da",
        measurementId: "G-612FVVNZVK"
    };

    // Initialize Firebase
    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);
    const db = getFirestore(app);

    // --- DOM ELEMENTS ---
    const splashScreen = document.getElementById('splash-screen');
    const authScreen = document.getElementById('auth-screen');
    const mainApp = document.getElementById('main-app');
    const bottomBar = document.getElementById('bottom-bar');
    const loginForm = document.getElementById('login-form');
    const regForm = document.getElementById('register-form');

    // --- ANIMATIONS ---
    window.onload = () => {
        // Splash Animation
        anime.timeline()
        .add({
            targets: '.bird-icon',
            opacity: [0, 1],
            translateX: [-100, 0],
            translateY: [-50, 0],
            duration: 1200,
            easing: 'easeOutElastic(1, .6)'
        })
        .add({
            targets: '.app-title .letter',
            opacity: [0, 1],
            translateY: [20, 0],
            delay: anime.stagger(100),
            duration: 800,
            easing: 'easeOutExpo'
        })
        .add({
            targets: '#splash-screen',
            opacity: 0,
            duration: 500,
            delay: 1000,
            easing: 'easeInOutQuad',
            complete: function() {
                splashScreen.style.display = 'none';
                checkUserStatus(); // Check Firebase Auth after splash
            }
        });

        renderMemorizingCards(); // Load dummy data for UI
    };

    // --- AUTH LOGIC ---
    window.toggleAuth = (view) => {
        if(view === 'register') {
            loginForm.classList.add('hidden');
            regForm.classList.remove('hidden');
            anime({ targets: '#register-form', translateX: [50, 0], opacity: [0, 1], duration: 400, easing: 'easeOutQuad' });
        } else {
            regForm.classList.add('hidden');
            loginForm.classList.remove('hidden');
            anime({ targets: '#login-form', translateX: [-50, 0], opacity: [0, 1], duration: 400, easing: 'easeOutQuad' });
        }
    }

    // Expose functions to window for onclick
    window.handleLogin = async () => {
        const email = document.getElementById('login-email').value;
        const pass = document.getElementById('login-pass').value;
        try {
            await signInWithEmailAndPassword(auth, email, pass);
            // Animation for welcome is handled in checkUserStatus
        } catch (error) {
            alert("Email or Password Is Wrong");
        }
    };

    window.handleRegister = async () => {
        const email = document.getElementById('reg-email').value;
        const pass = document.getElementById('reg-pass').value;
        try {
            await createUserWithEmailAndPassword(auth, email, pass);
            // User created, auto logged in
        } catch (error) {
            alert(error.message);
        }
    };

    window.logout = () => {
        signOut(auth).then(() => {
            location.reload();
        });
    };

    function checkUserStatus() {
        onAuthStateChanged(auth, (user) => {
            if (user) {
                authScreen.style.display = 'none';
                mainApp.classList.remove('hidden');
                bottomBar.classList.remove('hidden');
                document.getElementById('user-name-display').innerText = user.email.split('@')[0];
                
                // Welcome Animation
                anime({
                    targets: '#main-app',
                    opacity: [0, 1],
                    translateY: [20, 0],
                    duration: 800
                });
            } else {
                authScreen.style.display = 'flex';
                mainApp.classList.add('hidden');
                bottomBar.classList.add('hidden');
            }
        });
    }

    // --- NAVIGATION LOGIC ---
    window.switchTab = (tabName) => {
        // Hide all views
        document.querySelectorAll('.page-view').forEach(el => el.classList.remove('active'));
        document.querySelectorAll('.nav-btn').forEach(el => el.classList.remove('active'));

        // Show selected view
        document.getElementById(tabName + '-view').classList.add('active');
        
        // Highlight nav button (if exists)
        const btn = document.getElementById('btn-' + tabName);
        if(btn) btn.classList.add('active');

        // Scroll to top
        window.scrollTo(0,0);
    }

    window.startExam = () => {
        alert("Exam Started! (Rules: No cheating, Time: 2hrs)");
        // Logic to open full screen exam modal would go here
    }

    // --- DYNAMIC CONTENT (Mock Data based on Admin requirement) ---
    function renderMemorizingCards() {
        const container = document.getElementById('memorizing-list');
        const dummyData = [
            { title: "Vocabulary: Adroit", progress: 80 },
            { title: "G.K: Liberation War 1971", progress: 40 },
            { title: "Science: Isotopes", progress: 0 },
            { title: "Math: Geometry Formula", progress: 100 },
            { title: "Bangla: Kobi Nazrul", progress: 20 }
        ];

        container.innerHTML = dummyData.map(item => `
            <div class="bg-white p-4 rounded-xl card-shadow flex justify-between items-center relative overflow-hidden">
                <div>
                    <h4 class="font-bold text-sm text-gray-700">${item.title}</h4>
                    <p class="text-xs text-gray-400">Click to read details</p>
                </div>
                <div class="progress-circle" style="--percent: ${item.progress}">
                    <div class="progress-inner">${item.progress}%</div>
                </div>
                ${item.progress === 100 ? '<div class="absolute inset-0 bg-green-500 opacity-10"></div>' : ''}
            </div>
        `).join('');
    }
</script>

</body>
</html>
